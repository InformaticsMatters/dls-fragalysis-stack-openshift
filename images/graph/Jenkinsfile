#!groovyâ€‹

// The Fragalysis Graph Database Builder.

pipeline {

    // As we may need different flavours of agent,
    // the agent definition is deferred to each stage.
    agent none

    stages {

        stage('Check and Build') {

            agent {
                label 'buildah-slave'
            }

            steps {

                dir('images/graph') {
                    script {
                        DATA_DIR = sh(script: 'get_unbuilt_data_directory.py', returnStdout: true).trim()
                    }
                    echo "Data to build = ${DATA_DIR}"
                }

            }

        }

    }

}
